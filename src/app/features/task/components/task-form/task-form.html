<form [formGroup]="form" (ngSubmit)="onSubmit()" class="space-y-4">
    <div class="grid gap-2">
        <label hlmLabel for="title">Title</label>
        <input hlmInput id="title" type="text" formControlName="title" class="w-full" placeholder="Enter task title">
        @if (form.get('title')?.touched && form.get('title')?.errors?.['required']) {
        <p class="text-destructive text-sm">Title is required</p>}
    </div>

    <div class="grid gap-2">
        <label hlmLabel for="description">Description</label>
        <input hlmInput id="description" type="text" formControlName="description" class="w-full"
            placeholder="Enter task description">
    </div>

    <div class="grid gap-2">
        <label hlmLabel>Priority</label>
        <brn-select formControlName="priority" class="w-full">
            <hlm-select-trigger class="w-full">
                <hlm-select-value placeholder="Select priority" />
            </hlm-select-trigger>
            <hlm-select-content class="min-w-[8rem]">
                @for (priority of priorities; track priority.value) {
                <hlm-option [value]="priority.value">{{ priority.label }}</hlm-option>}
            </hlm-select-content>
        </brn-select>
    </div>

    @if (isUpdateMode) {
    <div class="grid gap-2">
        <label hlmLabel>Status</label>
        <brn-select formControlName="status" class="w-full">
            <hlm-select-trigger class="w-full">
                <hlm-select-value placeholder="Select status" />
            </hlm-select-trigger>
            <hlm-select-content class="min-w-[8rem]">
                @for (status of statuses; track status.value) {
                <hlm-option [value]="status.value">{{ status.label }}</hlm-option>}
            </hlm-select-content>
        </brn-select>
    </div>
    }

    <div class="grid gap-2">
        <label hlmLabel for="dueDate">Due Date</label>
        <hlm-date-picker buttonId="dueDate" formControlName="dueDate" class="w-full">
            <span>Pick a date</span>
        </hlm-date-picker>
        @if (form.get('dueDate')?.touched && form.get('dueDate')?.errors?.['required']) {
        <p class="text-destructive text-sm">Due date is required</p>}
    </div>

    @if (serverError) {
    <div class="rounded-md bg-destructive/15 p-3 text-sm text-destructive">
        {{ serverError }}
    </div>
    }

    <div class="flex justify-between items-center pt-4">
        <button hlmBtn type="submit" [disabled]="isLoading" class="ml-auto">
            {{ isLoading ? (isUpdateMode ? 'Updating...' : 'Creating...') : (isUpdateMode ? 'Update Task' : 'Create
            Task') }}
        </button>
    </div>
</form>